/*!
 Rosso.js - minimal client-side JS framework
 (C) 2014 Alessandro Segala.
 Based on page.js, (C) 2012 TJ Holowaychuk <tj@vision-media.ca>.
 License: MIT
 
 Includes path-to-js.
 Copyright (c) 2014 Blake Embrey (hello@blakeembrey.com).
 License: MIT
 */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){function c(a){return a.replace(/([=!:$\/()])/g,"\\$1")}function d(a,b,g){b&&!Array.isArray(b)&&(g=b,b=null),b=b||[],g=g||{};var h=g.strict,i=g.end!==!1,j=g.sensitive?"":"i",k=0;if(a instanceof RegExp){var l=a.source.match(/\((?!\?)/g)||[];return b.push.apply(b,l.map(function(a,b){return{name:b,delimiter:null,optional:!1,repeat:!1}})),f(a,b)}if(Array.isArray(a))return a=a.map(function(a){return d(a,b,g).source}),f(new RegExp("(?:"+a.join("|")+")",j),b);a=a.replace(e,function(a,d,e,f,g,h,i,j){if(d)return d;if(j)return"\\"+j;var l="+"===i||"*"===i,m="?"===i||"*"===i;return b.push({name:f||k++,delimiter:e||"/",optional:m,repeat:l}),e=e?"\\"+e:"",g=c(g||h||"[^"+(e||"\\/")+"]+?"),l&&(g=g+"(?:"+e+g+")*"),m?"(?:"+e+"("+g+"))?":e+"("+g+")"});var m="/"===a[a.length-1];return h||(a=(m?a.slice(0,-2):a)+"(?:\\/(?=$))?"),i||(a+=h&&m?"":"(?=\\/|$)"),f(new RegExp("^"+a+(i?"$":""),j),b)}b.exports=d;var e=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g"),f=function(a,b){return a.keys=b,a}},{}],2:[function(a,b){"use strict";function c(a){var b=a.indexOf("?");if(this.path=a,this.querystring=-1!==b?a.slice(b+1):"",this.pathname=-1!==b?a.slice(0,b):a,this.params=[],this.querystringParams={},this.querystring){var c=this.querystring.split("&");for(var d in c){var e=c[d].split("=").map(decodeURIComponent);this.querystringParams[e[0]]=e[1]}}}b&&(b.exports=c)},{}],3:[function(a,b){"use strict";function c(a,b){if("object"==typeof b){var d=new e(a);c.callbacks.push(d.middleware(function(a,d){c.loadPage(b,a,d)}))}else"string"==typeof a?c.show(a):c.init(a)}function d(){c.show(c.getPath())}var e=a("./Route.js"),f=a("./Context.js"),g=!1,h={container:""},i=!1;c.callbacks=[],c.setOption=function(a,b){h[a]=b},c.getOption=function(a){return h[a]},c.init=function(a){for(var b in a)this.setOption(b,a[b]);g||(g=!0,window.addEventListener("hashchange",d,!1),d())},c.deinit=function(){g=!1,window.removeEventListener("hashchange",d,!1)},c.push=function(a){window.location.hash="#"+a},c.pop=function(){window.history.back()},c.show=function(a){function b(){var a=c.callbacks[d++];a&&a(e,b)}i&&(c.unloadPage(i),i=!1);var d=0;a||(a="");var e=new f(a);return b(),e},c.getPath=function(){if(window.location.href.indexOf("#")>-1){var a=window.location.href.split("#");return a[a.length-1]}return""},c.loadPage=function(a,b,c){if(a.view&&h.container){var d=document.getElementById(h.container);if("string"==typeof a.view&&"#"==a.view[0]){var e=document.getElementById(a.view.substr(1));if(e&&d){var f=e.innerHTML;d.innerHTML=f}}else if("function"==typeof a.view){var f=a.view(b);d&&(d.innerHTML=f)}}a.init?a.init(b,c):c&&c()},c.unloadPage=function(a){a.deinit&&a.destroy()},b&&(b.exports=c),window.Rosso=c},{"./Context.js":2,"./Route.js":4}],4:[function(a,b){"use strict";function c(a,b){b=b||{},this.path="*"===a?"(.*)":a,this.regexp=d(this.path,this.keys=[],b.sensitive,b.strict)}var d=a("path-to-regexp");c.prototype.middleware=function(a){var b=this;return function(c,d){return b.match(c.path,c.params)?a(c,d):void d()}},c.prototype.match=function(a,b){var c=this.keys,d=a.indexOf("?"),e=-1!==d?a.slice(0,d):a,f=this.regexp.exec(decodeURIComponent(e));if(!f)return!1;for(var g=1,h=f.length;h>g;++g){var i=c[g-1],j="string"==typeof f[g]?decodeURIComponent(f[g]):f[g];i?b[i.name]=void 0!==b[i.name]?b[i.name]:j:b.push(j)}return!0},b.exports=c},{"path-to-regexp":1}]},{},[3]);