/*!
 Rosso.js - minimal client-side JS framework
 (C) 2014 Alessandro Segala.
 Based on page.js, (C) 2012 TJ Holowaychuk <tj@vision-media.ca>.
 License: MIT
 
 Includes path-to-js.
 Copyright (c) 2014 Blake Embrey (hello@blakeembrey.com).
 License: MIT
 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Rosso=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){return a.replace(/([=!:$\/()])/g,"\\$1")}function e(a,b){return a.keys=b,a}function f(a){return a.sensitive?"":"i"}function g(a,b){var c=a.source.match(/\((?!\?)/g);if(c)for(var d=0;d<c.length;d++)b.push({name:d,delimiter:null,optional:!1,repeat:!1});return e(a,b)}function h(a,b,c){for(var d=[],g=0;g<a.length;g++)d.push(j(a[g],b,c).source);var h=new RegExp("(?:"+d.join("|")+")",f(c));return e(h,b)}function i(a,b){function c(a,c,f,g,h,i,j,k){if(c)return c;if(k)return"\\"+k;var l="+"===j||"*"===j,m="?"===j||"*"===j;return b.push({name:g||e++,delimiter:f||"/",optional:m,repeat:l}),f=f?"\\"+f:"",h=d(h||i||"[^"+(f||"\\/")+"]+?"),l&&(h=h+"(?:"+f+h+")*"),m?"(?:"+f+"("+h+"))?":f+"("+h+")"}var e=0;return a.replace(l,c)}function j(a,b,c){if(b=b||[],k(b)?c||(c={}):(c=b,b=[]),a instanceof RegExp)return g(a,b,c);if(k(a))return h(a,b,c);var d=c.strict,j=c.end!==!1,l=i(a,b),m="/"===a.charAt(a.length-1);return d||(l=(m?l.slice(0,-2):l)+"(?:\\/(?=$))?"),l+=j?"$":d&&m?"":"(?=\\/|$)",e(new RegExp("^"+l,f(c)),b)}var k=a("isarray");b.exports=j;var l=new RegExp(["(\\\\.)","([\\/.])?(?:\\:(\\w+)(?:\\(((?:\\\\.|[^)])*)\\))?|\\(((?:\\\\.|[^)])*)\\))([+*?])?","([.+*?=^!:${}()[\\]|\\/])"].join("|"),"g")},{isarray:2}],2:[function(a,b,c){b.exports=Array.isArray||function(a){return"[object Array]"==Object.prototype.toString.call(a)}},{}],3:[function(a,b,c){"use strict";function d(a){var b=a.indexOf("?");if(this.path=a,this.querystring=-1!==b?a.slice(b+1):"",this.pathname=-1!==b?a.slice(0,b):a,this.params=[],this.querystringParams={},this.querystring){var c=this.querystring.split("&");for(var d in c){var e=c[d].split("=").map(decodeURIComponent);this.querystringParams[e[0]]=e[1]}}}b&&(b.exports=d)},{}],4:[function(a,b,c){"use strict";function d(a,b){if("object"==typeof b){var c=new f(a,b);d.routes.push(c)}else"string"==typeof a?d.show(a):d.init(a)}function e(){d.show(d.getPath())}var f=a("./Route.js"),g=a("./Context.js"),h=!1,i={container:""},j=!1;d.routes=[],d.middlewares={},d.middleware=function(a,b){d.middlewares[a]=b},d.setOption=function(a,b){i[a]=b},d.getOption=function(a){return i[a]},d.init=function(a){for(var b in a)this.setOption(b,a[b]);h||(h=!0,window.addEventListener("hashchange",e,!1),e())},d.deinit=function(){h=!1,window.removeEventListener("hashchange",e,!1)},d.push=function(a){h&&("#"==a.substr(0,1)&&(a=a.substr(1)),setTimeout(function(){window.location.hash="#"+a},0))},d.pop=function(){h&&setTimeout(function(){window.history.back()},0)},d.replace=function(a){h&&("#"==a.substr(0,1)&&(a=a.substr(1)),setTimeout(function(){window.history&&history.replaceState?(history.replaceState(void 0,void 0,"#"+a),e()):location.replace("#"+a)},0))},d.getPath=function(){if(window.location.href.indexOf("#")>-1){var a=window.location.href.split("#");return a[a.length-1]}return""},d.currentPage=function(){return j.args},d.show=function(a){"#"==a.substr(0,1)&&(a=a.substr(1)),j&&(d.unloadPage(j),j=!1),a||(a="");for(var b=new g(a),c=0;c<d.routes.length;c++){var e=d.routes[c];if(e.match(b.path,b.params)){j=e,d.loadPage(e.args,b);break}}return b},d.loadPage=function(a,b,c){var e=a.middlewares?a.middlewares.slice():[],f=function(b,c){if(a.ctx=b,a.view&&i.container){var d=!1;if("object"==typeof i.container&&i.container.nodeName?d=i.container:"string"==typeof i.container&&(d=document.getElementById(i.container)),"string"==typeof a.view&&"#"==a.view[0]){var e=document.getElementById(a.view.substr(1));if(e&&d){var f=e.innerHTML;d.innerHTML=f}}else if("function"==typeof a.view){var f=a.view(b);d&&(d.innerHTML=f)}}a.init?a.init(b,c):c()};e.push(f);var g=function(a,b){b(!0)},h=function(a){if(a)return void(c&&c(!0));var f=e.shift();return f?("string"==typeof f&&(f=d.middlewares[f]?d.middlewares[f].init:!1,f||(f=g)),void f(b,h)):void(c&&c(!1))};return h(),!0},d.unloadPage=function(a){a.args.ctx&&delete a.args.ctx,a.args.destroy&&a.args.destroy()},b&&(b.exports=d),window.Rosso=d},{"./Context.js":3,"./Route.js":5}],5:[function(a,b,c){"use strict";function d(a,b,c){c=c||{},this.path="*"===a?"(.*)":a,this.regexp=e(this.path,this.keys=[],c.sensitive,c.strict),this.args=b}var e=a("path-to-regexp");d.prototype.getArgs=function(){return this.args?this.args:{}},d.prototype.setArgs=function(a){this.args=a},d.prototype.match=function(a,b){var c=this.keys,d=a.indexOf("?"),e=-1!==d?a.slice(0,d):a,f=this.regexp.exec(decodeURIComponent(e));if(!f)return!1;for(var g=1,h=f.length;h>g;++g){var i=c[g-1],j="string"==typeof f[g]?decodeURIComponent(f[g]):f[g];i?b[i.name]=void 0!==b[i.name]?b[i.name]:j:b.push(j)}return!0},b.exports=d},{"path-to-regexp":1}]},{},[4])(4)});